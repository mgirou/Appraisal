function InfoBox(e){e=e||{};google.maps.OverlayView.apply(this,arguments);this.content_=e.content||"";this.disableAutoPan_=e.disableAutoPan||false;this.maxWidth_=e.maxWidth||0;this.pixelOffset_=e.pixelOffset||new google.maps.Size(0,0);this.position_=e.position||new google.maps.LatLng(0,0);this.zIndex_=e.zIndex||null;this.boxClass_=e.boxClass||"infoBox";this.boxStyle_=e.boxStyle||{};this.closeBoxMargin_=e.closeBoxMargin||"2px";this.closeBoxURL_=e.closeBoxURL||"http://www.google.com/intl/en_us/mapfiles/close.gif";if(e.closeBoxURL===""){this.closeBoxURL_=""}this.infoBoxClearance_=e.infoBoxClearance||new google.maps.Size(1,1);this.isHidden_=e.isHidden||false;this.alignBottom_=e.alignBottom||false;this.pane_=e.pane||"floatPane";this.enableEventPropagation_=e.enableEventPropagation||false;this.div_=null;this.closeListener_=null;this.eventListener1_=null;this.eventListener2_=null;this.eventListener3_=null;this.moveListener_=null;this.contextListener_=null;this.fixedWidthSet_=null}(function(e){if(typeof define=="function"){define(e)}else if(typeof YUI=="function"){YUI.add("es5",e)}else{e()}})(function(){function e(){}function A(e){e=+e;if(e!==e){e=0}else if(e!==0&&e!==1/0&&e!==-(1/0)){e=(e>0||-1)*Math.floor(Math.abs(e))}return e}function O(e){var t=typeof e;return e===null||t==="undefined"||t==="boolean"||t==="number"||t==="string"}function M(e){var t,n,r;if(O(e)){return e}n=e.valueOf;if(typeof n==="function"){t=n.call(e);if(O(t)){return t}}r=e.toString;if(typeof r==="function"){t=r.call(e);if(O(t)){return t}}throw new TypeError}if(!Function.prototype.bind){Function.prototype.bind=function(n){var r=this;if(typeof r!="function"){throw new TypeError("Function.prototype.bind called on incompatible "+r)}var s=i.call(arguments,1);var o=function(){if(this instanceof o){var e=r.apply(this,s.concat(i.call(arguments)));if(Object(e)===e){return e}return this}else{return r.apply(n,s.concat(i.call(arguments)))}};if(r.prototype){e.prototype=r.prototype;o.prototype=new e;e.prototype=null}return o}}var t=Function.prototype.call;var n=Array.prototype;var r=Object.prototype;var i=n.slice;var s=t.bind(r.toString);var o=t.bind(r.hasOwnProperty);var u;var a;var f;var l;var c;if(c=o(r,"__defineGetter__")){u=t.bind(r.__defineGetter__);a=t.bind(r.__defineSetter__);f=t.bind(r.__lookupGetter__);l=t.bind(r.__lookupSetter__)}if([1,2].splice(0).length!=2){var h=Array.prototype.splice;if(function(){function e(e){var t=[];while(e--){t.unshift(e)}return t}var t=[],n;t.splice.bind(t,0,0).apply(null,e(20));t.splice.bind(t,0,0).apply(null,e(26));n=t.length;t.splice(5,0,"XXX");if(n+1==t.length){return true}}()){Array.prototype.splice=function(e,t){if(!arguments.length){return[]}else{return h.apply(this,[e===void 0?0:e,t===void 0?this.length-e:t].concat(i.call(arguments,2)))}}}else{Array.prototype.splice=function(e,t){var n,r=i.call(arguments,2),s=r.length;if(!arguments.length){return[]}if(e===void 0){e=0}if(t===void 0){t=this.length-e}if(s>0){if(t<=0){if(e==this.length){this.push.apply(this,r);return[]}if(e==0){this.unshift.apply(this,r);return[]}}n=i.call(this,e,e+t);r.push.apply(r,i.call(this,e+t,this.length));r.unshift.apply(r,i.call(this,0,e));r.unshift(0,this.length);h.apply(this,r);return n}return h.call(this,e,t)}}}if([].unshift(0)!=1){var p=Array.prototype.unshift;Array.prototype.unshift=function(){p.apply(this,arguments);return this.length}}if(!Array.isArray){Array.isArray=function(t){return s(t)=="[object Array]"}}var d=Object("a"),v=d[0]!="a"||!(0 in d);if(!Array.prototype.forEach){Array.prototype.forEach=function(t){var n=_(this),r=v&&s(this)=="[object String]"?this.split(""):n,i=arguments[1],o=-1,u=r.length>>>0;if(s(t)!="[object Function]"){throw new TypeError}while(++o<u){if(o in r){t.call(i,r[o],o,n)}}}}if(!Array.prototype.map){Array.prototype.map=function(t){var n=_(this),r=v&&s(this)=="[object String]"?this.split(""):n,i=r.length>>>0,o=Array(i),u=arguments[1];if(s(t)!="[object Function]"){throw new TypeError(t+" is not a function")}for(var a=0;a<i;a++){if(a in r)o[a]=t.call(u,r[a],a,n)}return o}}if(!Array.prototype.filter){Array.prototype.filter=function(t){var n=_(this),r=v&&s(this)=="[object String]"?this.split(""):n,i=r.length>>>0,o=[],u,a=arguments[1];if(s(t)!="[object Function]"){throw new TypeError(t+" is not a function")}for(var f=0;f<i;f++){if(f in r){u=r[f];if(t.call(a,u,f,n)){o.push(u)}}}return o}}if(!Array.prototype.every){Array.prototype.every=function(t){var n=_(this),r=v&&s(this)=="[object String]"?this.split(""):n,i=r.length>>>0,o=arguments[1];if(s(t)!="[object Function]"){throw new TypeError(t+" is not a function")}for(var u=0;u<i;u++){if(u in r&&!t.call(o,r[u],u,n)){return false}}return true}}if(!Array.prototype.some){Array.prototype.some=function(t){var n=_(this),r=v&&s(this)=="[object String]"?this.split(""):n,i=r.length>>>0,o=arguments[1];if(s(t)!="[object Function]"){throw new TypeError(t+" is not a function")}for(var u=0;u<i;u++){if(u in r&&t.call(o,r[u],u,n)){return true}}return false}}if(!Array.prototype.reduce){Array.prototype.reduce=function(t){var n=_(this),r=v&&s(this)=="[object String]"?this.split(""):n,i=r.length>>>0;if(s(t)!="[object Function]"){throw new TypeError(t+" is not a function")}if(!i&&arguments.length==1){throw new TypeError("reduce of empty array with no initial value")}var o=0;var u;if(arguments.length>=2){u=arguments[1]}else{do{if(o in r){u=r[o++];break}if(++o>=i){throw new TypeError("reduce of empty array with no initial value")}}while(true)}for(;o<i;o++){if(o in r){u=t.call(void 0,u,r[o],o,n)}}return u}}if(!Array.prototype.reduceRight){Array.prototype.reduceRight=function(t){var n=_(this),r=v&&s(this)=="[object String]"?this.split(""):n,i=r.length>>>0;if(s(t)!="[object Function]"){throw new TypeError(t+" is not a function")}if(!i&&arguments.length==1){throw new TypeError("reduceRight of empty array with no initial value")}var o,u=i-1;if(arguments.length>=2){o=arguments[1]}else{do{if(u in r){o=r[u--];break}if(--u<0){throw new TypeError("reduceRight of empty array with no initial value")}}while(true)}do{if(u in this){o=t.call(void 0,o,r[u],u,n)}}while(u--);return o}}if(!Array.prototype.indexOf||[0,1].indexOf(1,2)!=-1){Array.prototype.indexOf=function(t){var n=v&&s(this)=="[object String]"?this.split(""):_(this),r=n.length>>>0;if(!r){return-1}var i=0;if(arguments.length>1){i=A(arguments[1])}i=i>=0?i:Math.max(0,r+i);for(;i<r;i++){if(i in n&&n[i]===t){return i}}return-1}}if(!Array.prototype.lastIndexOf||[0,1].lastIndexOf(0,-3)!=-1){Array.prototype.lastIndexOf=function(t){var n=v&&s(this)=="[object String]"?this.split(""):_(this),r=n.length>>>0;if(!r){return-1}var i=r-1;if(arguments.length>1){i=Math.min(i,A(arguments[1]))}i=i>=0?i:r-Math.abs(i);for(;i>=0;i--){if(i in n&&t===n[i]){return i}}return-1}}if(!Object.keys){var m=true,g=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],y=g.length;for(var b in{toString:null}){m=false}Object.keys=function D(e){if(typeof e!="object"&&typeof e!="function"||e===null){throw new TypeError("Object.keys called on a non-object")}var D=[];for(var t in e){if(o(e,t)){D.push(t)}}if(m){for(var n=0,r=y;n<r;n++){var i=g[n];if(o(e,i)){D.push(i)}}}return D}}var w=-621987552e5,E="-000001";if(!Date.prototype.toISOString||(new Date(w)).toISOString().indexOf(E)===-1){Date.prototype.toISOString=function(){var t,n,r,i,s;if(!isFinite(this)){throw new RangeError("Date.prototype.toISOString called on non-finite value.")}i=this.getUTCFullYear();s=this.getUTCMonth();i+=Math.floor(s/12);s=(s%12+12)%12;t=[s+1,this.getUTCDate(),this.getUTCHours(),this.getUTCMinutes(),this.getUTCSeconds()];i=(i<0?"-":i>9999?"+":"")+("00000"+Math.abs(i)).slice(0<=i&&i<=9999?-4:-6);n=t.length;while(n--){r=t[n];if(r<10){t[n]="0"+r}}return i+"-"+t.slice(0,2).join("-")+"T"+t.slice(2).join(":")+"."+("000"+this.getUTCMilliseconds()).slice(-3)+"Z"}}var S=false;try{S=Date.prototype.toJSON&&(new Date(NaN)).toJSON()===null&&(new Date(w)).toJSON().indexOf(E)!==-1&&Date.prototype.toJSON.call({toISOString:function(){return true}})}catch(x){}if(!S){Date.prototype.toJSON=function(t){var n=Object(this),r=M(n),i;if(typeof r==="number"&&!isFinite(r)){return null}i=n.toISOString;if(typeof i!="function"){throw new TypeError("toISOString property is not callable")}return i.call(n)}}if(!Date.parse||"Date.parse is buggy"){Date=function(e){function t(n,r,i,s,o,u,a){var f=arguments.length;if(this instanceof e){var l=f==1&&String(n)===n?new e(t.parse(n)):f>=7?new e(n,r,i,s,o,u,a):f>=6?new e(n,r,i,s,o,u):f>=5?new e(n,r,i,s,o):f>=4?new e(n,r,i,s):f>=3?new e(n,r,i):f>=2?new e(n,r):f>=1?new e(n):new e;l.constructor=t;return l}return e.apply(this,arguments)}function i(e,t){var n=t>1?1:0;return r[t]+Math.floor((e-1969+n)/4)-Math.floor((e-1901+n)/100)+Math.floor((e-1601+n)/400)+365*(e-1970)}var n=new RegExp("^"+"(\\d{4}|[+-]\\d{6})"+"(?:-(\\d{2})"+"(?:-(\\d{2})"+"(?:"+"T(\\d{2})"+":(\\d{2})"+"(?:"+":(\\d{2})"+"(?:(\\.\\d{1,}))?"+")?"+"("+"Z|"+"(?:"+"([-+])"+"(\\d{2})"+":(\\d{2})"+")"+")?)?)?)?"+"$");var r=[0,31,59,90,120,151,181,212,243,273,304,334,365];for(var s in e){t[s]=e[s]}t.now=e.now;t.UTC=e.UTC;t.prototype=e.prototype;t.prototype.constructor=t;t.parse=function(r){var s=n.exec(r);if(s){var o=Number(s[1]),u=Number(s[2]||1)-1,a=Number(s[3]||1)-1,f=Number(s[4]||0),l=Number(s[5]||0),c=Number(s[6]||0),h=Math.floor(Number(s[7]||0)*1e3),p=!s[4]||s[8]?0:Number(new e(1970,0)),d=s[9]==="-"?1:-1,v=Number(s[10]||0),m=Number(s[11]||0),g;if(f<(l>0||c>0||h>0?24:25)&&l<60&&c<60&&h<1e3&&u>-1&&u<12&&v<24&&m<60&&a>-1&&a<i(o,u+1)-i(o,u)){g=((i(o,u)+a)*24+f+v*d)*60;g=((g+l+m*d)*60+c)*1e3+h+p;if(-864e13<=g&&g<=864e13){return g}}return NaN}return e.parse.apply(this,arguments)};return t}(Date)}if(!Date.now){Date.now=function(){return(new Date).getTime()}}if(!Number.prototype.toFixed||8e-5.toFixed(3)!=="0.000"||.9.toFixed(0)==="0"||1.255.toFixed(2)!=="1.25"||0xde0b6b3a7640080.toFixed(0)!=="1000000000000000128"){(function(){function i(r,i){var s=-1;while(++s<t){i+=r*n[s];n[s]=i%e;i=Math.floor(i/e)}}function s(r){var i=t,s=0;while(--i>=0){s+=n[i];n[i]=Math.floor(s/r);s=s%r*e}}function o(){var e=t;var r="";while(--e>=0){if(r!==""||e===0||n[e]!==0){var i=String(n[e]);if(r===""){r=i}else{r+="0000000".slice(0,7-i.length)+i}}}return r}function u(e,t,n){return t===0?n:t%2===1?u(e,t-1,n*e):u(e*e,t/2,n)}function a(e){var t=0;while(e>=4096){t+=12;e/=4096}while(e>=2){t+=1;e/=2}return t}var e,t,n,r;e=1e7;t=6;n=[0,0,0,0,0,0];Number.prototype.toFixed=function(e){var t,n,r,f,l,c,h,p;t=Number(e);t=t!==t?0:Math.floor(t);if(t<0||t>20){throw new RangeError("Number.toFixed called with invalid number of decimals")}n=Number(this);if(n!==n){return"NaN"}if(n<=-1e21||n>=1e21){return String(n)}r="";if(n<0){r="-";n=-n}f="0";if(n>1e-21){l=a(n*u(2,69,1))-69;c=l<0?n*u(2,-l,1):n/u(2,l,1);c*=4503599627370496;l=52-l;if(l>0){i(0,c);h=t;while(h>=7){i(1e7,0);h-=7}i(u(10,h,1),0);h=l-1;while(h>=23){s(1<<23);h-=23}s(1<<h);i(1,1);s(2);f=o()}else{i(0,c);i(1<<-l,0);f=o()+"0.00000000000000000000".slice(2,2+t)}}if(t>0){p=f.length;if(p<=t){f=r+"0.0000000000000000000".slice(0,t-p+2)+f}else{f=r+f.slice(0,p-t)+"."+f.slice(p-t)}}else{f=r+f}return f}})()}if("0".split(void 0,0).length){var T=String.prototype.split;String.prototype.split=function(e,t){if(e===void 0&&t===0)return[];return T.apply(this,arguments)}}if("".substr&&"0b".substr(-1)!=="b"){var N=String.prototype.substr;String.prototype.substr=function(e,t){return N.call(this,e<0?(e=this.length+e)<0?0:e:e,t)}}var C="	\n\f\r   ᠎    "+"         　\u2028"+"\u2029﻿";if(!String.prototype.trim||C.trim()){C="["+C+"]";var k=new RegExp("^"+C+C+"*"),L=new RegExp(C+C+"*$");String.prototype.trim=function(){if(this===undefined||this===null){throw new TypeError("can't convert "+this+" to object")}return String(this).replace(k,"").replace(L,"")}}var _=function(e){if(e==null){throw new TypeError("can't convert "+e+" to object")}return Object(e)}});InfoBox.prototype=new google.maps.OverlayView;InfoBox.prototype.createInfoBoxDiv_=function(){var e;var t=this;var n=function(e){e.cancelBubble=true;if(e.stopPropagation){e.stopPropagation()}};var r=function(e){e.returnValue=false;if(e.preventDefault){e.preventDefault()}if(!t.enableEventPropagation_){n(e)}};if(!this.div_){this.div_=document.createElement("div");this.setBoxStyle_();if(typeof this.content_.nodeType==="undefined"){this.div_.innerHTML=this.getCloseBoxImg_()+this.content_}else{this.div_.innerHTML=this.getCloseBoxImg_();this.div_.appendChild(this.content_)}this.getPanes()[this.pane_].appendChild(this.div_);this.addClickHandler_();if(this.div_.style.width){this.fixedWidthSet_=true}else{if(this.maxWidth_!==0&&this.div_.offsetWidth>this.maxWidth_){this.div_.style.width=this.maxWidth_;this.div_.style.overflow="auto";this.fixedWidthSet_=true}else{e=this.getBoxWidths_();this.div_.style.width=this.div_.offsetWidth-e.left-e.right+"px";this.fixedWidthSet_=false}}this.panBox_(this.disableAutoPan_);if(!this.enableEventPropagation_){this.eventListener1_=google.maps.event.addDomListener(this.div_,"mousedown",n);this.eventListener2_=google.maps.event.addDomListener(this.div_,"click",n);this.eventListener3_=google.maps.event.addDomListener(this.div_,"dblclick",n);this.eventListener4_=google.maps.event.addDomListener(this.div_,"mouseover",function(e){this.style.cursor="default"})}this.contextListener_=google.maps.event.addDomListener(this.div_,"contextmenu",r);google.maps.event.trigger(this,"domready")}};InfoBox.prototype.getCloseBoxImg_=function(){var e="";if(this.closeBoxURL_!==""){e="<img";e+=" src='"+this.closeBoxURL_+"'";e+=" align=right";e+=" style='";e+=" position: relative;";e+=" cursor: pointer;";e+=" margin: "+this.closeBoxMargin_+";";e+="'>"}return e};InfoBox.prototype.addClickHandler_=function(){var e;if(this.closeBoxURL_!==""){e=this.div_.firstChild;this.closeListener_=google.maps.event.addDomListener(e,"click",this.getCloseClickHandler_())}else{this.closeListener_=null}};InfoBox.prototype.getCloseClickHandler_=function(){var e=this;return function(t){t.cancelBubble=true;if(t.stopPropagation){t.stopPropagation()}e.close();google.maps.event.trigger(e,"closeclick")}};InfoBox.prototype.panBox_=function(e){var t;var n;var r=0,i=0;if(!e){t=this.getMap();if(t instanceof google.maps.Map){if(!t.getBounds().contains(this.position_)){t.setCenter(this.position_)}n=t.getBounds();var s=t.getDiv();var o=s.offsetWidth;var u=s.offsetHeight;var a=this.pixelOffset_.width;var f=this.pixelOffset_.height;var l=this.div_.offsetWidth;var c=this.div_.offsetHeight;var h=this.infoBoxClearance_.width;var p=this.infoBoxClearance_.height;var d=this.getProjection().fromLatLngToContainerPixel(this.position_);if(d.x<-a+h){r=d.x+a-h}else if(d.x+l+a+h>o){r=d.x+l+a+h-o}if(this.alignBottom_){if(d.y<-f+p+c){i=d.y+f-p-c}else if(d.y+f+p>u){i=d.y+f+p-u}}else{if(d.y<-f+p){i=d.y+f-p}else if(d.y+c+f+p>u){i=d.y+c+f+p-u}}if(!(r===0&&i===0)){var v=t.getCenter();t.panBy(r,i)}}}};InfoBox.prototype.setBoxStyle_=function(){var e,t;if(this.div_){this.div_.className=this.boxClass_;this.div_.style.cssText="";t=this.boxStyle_;for(e in t){if(t.hasOwnProperty(e)){this.div_.style[e]=t[e]}}if(typeof this.div_.style.opacity!=="undefined"&&this.div_.style.opacity!==""){this.div_.style.filter="alpha(opacity="+this.div_.style.opacity*100+")"}this.div_.style.position="absolute";this.div_.style.visibility="hidden";if(this.zIndex_!==null){this.div_.style.zIndex=this.zIndex_}}};InfoBox.prototype.getBoxWidths_=function(){var e;var t={top:0,bottom:0,left:0,right:0};var n=this.div_;if(document.defaultView&&document.defaultView.getComputedStyle){e=n.ownerDocument.defaultView.getComputedStyle(n,"");if(e){t.top=parseInt(e.borderTopWidth,10)||0;t.bottom=parseInt(e.borderBottomWidth,10)||0;t.left=parseInt(e.borderLeftWidth,10)||0;t.right=parseInt(e.borderRightWidth,10)||0}}else if(document.documentElement.currentStyle){if(n.currentStyle){t.top=parseInt(n.currentStyle.borderTopWidth,10)||0;t.bottom=parseInt(n.currentStyle.borderBottomWidth,10)||0;t.left=parseInt(n.currentStyle.borderLeftWidth,10)||0;t.right=parseInt(n.currentStyle.borderRightWidth,10)||0}}return t};InfoBox.prototype.onRemove=function(){if(this.div_){this.div_.parentNode.removeChild(this.div_);this.div_=null}};InfoBox.prototype.draw=function(){this.createInfoBoxDiv_();var e=this.getProjection().fromLatLngToDivPixel(this.position_);this.div_.style.left=e.x+this.pixelOffset_.width+"px";if(this.alignBottom_){this.div_.style.bottom=-(e.y+this.pixelOffset_.height)+"px"}else{this.div_.style.top=e.y+this.pixelOffset_.height+"px"}if(this.isHidden_){this.div_.style.visibility="hidden"}else{this.div_.style.visibility="visible"}};InfoBox.prototype.setOptions=function(e){if(typeof e.boxClass!=="undefined"){this.boxClass_=e.boxClass;this.setBoxStyle_()}if(typeof e.boxStyle!=="undefined"){this.boxStyle_=e.boxStyle;this.setBoxStyle_()}if(typeof e.content!=="undefined"){this.setContent(e.content)}if(typeof e.disableAutoPan!=="undefined"){this.disableAutoPan_=e.disableAutoPan}if(typeof e.maxWidth!=="undefined"){this.maxWidth_=e.maxWidth}if(typeof e.pixelOffset!=="undefined"){this.pixelOffset_=e.pixelOffset}if(typeof e.alignBottom!=="undefined"){this.alignBottom_=e.alignBottom}if(typeof e.position!=="undefined"){this.setPosition(e.position)}if(typeof e.zIndex!=="undefined"){this.setZIndex(e.zIndex)}if(typeof e.closeBoxMargin!=="undefined"){this.closeBoxMargin_=e.closeBoxMargin}if(typeof e.closeBoxURL!=="undefined"){this.closeBoxURL_=e.closeBoxURL}if(typeof e.infoBoxClearance!=="undefined"){this.infoBoxClearance_=e.infoBoxClearance}if(typeof e.isHidden!=="undefined"){this.isHidden_=e.isHidden}if(typeof e.enableEventPropagation!=="undefined"){this.enableEventPropagation_=e.enableEventPropagation}if(this.div_){this.draw()}};InfoBox.prototype.setContent=function(e){this.content_=e;if(this.div_){if(this.closeListener_){google.maps.event.removeListener(this.closeListener_);this.closeListener_=null}if(!this.fixedWidthSet_){this.div_.style.width=""}if(typeof e.nodeType==="undefined"){this.div_.innerHTML=this.getCloseBoxImg_()+e}else{this.div_.innerHTML=this.getCloseBoxImg_();this.div_.appendChild(e)}if(!this.fixedWidthSet_){this.div_.style.width=this.div_.offsetWidth+"px";if(typeof e.nodeType==="undefined"){this.div_.innerHTML=this.getCloseBoxImg_()+e}else{this.div_.innerHTML=this.getCloseBoxImg_();this.div_.appendChild(e)}}this.addClickHandler_()}google.maps.event.trigger(this,"content_changed")};InfoBox.prototype.setPosition=function(e){this.position_=e;if(this.div_){this.draw()}google.maps.event.trigger(this,"position_changed")};InfoBox.prototype.setZIndex=function(e){this.zIndex_=e;if(this.div_){this.div_.style.zIndex=e}google.maps.event.trigger(this,"zindex_changed")};InfoBox.prototype.getContent=function(){return this.content_};InfoBox.prototype.getPosition=function(){return this.position_};InfoBox.prototype.getZIndex=function(){return this.zIndex_};InfoBox.prototype.show=function(){this.isHidden_=false;if(this.div_){this.div_.style.visibility="visible"}};InfoBox.prototype.hide=function(){this.isHidden_=true;if(this.div_){this.div_.style.visibility="hidden"}};InfoBox.prototype.open=function(e,t){var n=this;if(t){this.position_=t.getPosition();this.moveListener_=google.maps.event.addListener(t,"position_changed",function(){n.setPosition(this.getPosition())})}this.setMap(e);if(this.div_){this.panBox_()}};InfoBox.prototype.close=function(){if(this.closeListener_){google.maps.event.removeListener(this.closeListener_);this.closeListener_=null}if(this.eventListener1_){google.maps.event.removeListener(this.eventListener1_);google.maps.event.removeListener(this.eventListener2_);google.maps.event.removeListener(this.eventListener3_);google.maps.event.removeListener(this.eventListener4_);this.eventListener1_=null;this.eventListener2_=null;this.eventListener3_=null;this.eventListener4_=null}if(this.moveListener_){google.maps.event.removeListener(this.moveListener_);this.moveListener_=null}if(this.contextListener_){google.maps.event.removeListener(this.contextListener_);this.contextListener_=null}this.setMap(null)};rta=function(){"use strict";var e=function(){return this}();var t="/"+"*"+"..."+"*"+"/";var n={};n.version="0.3.0";n.millisec=!window.performance?function(){return+(new Date).getTime()}:window.performance.now?window.performance.now:window.performance.webkitNow?window.performance.webkitNow:window.performance.msNow?window.performance.msNow:window.performance.mozNow?window.performance.mozNow:function(){return+(new Date).getTime()};n.LOG_NOTHING=0;n.LOG_ERRORS=1;n.LOG_WARNINGS=2;n.LOG_INFO=3;n.LOG_DEBUG=4;n.logLevel=n.LOG_NOTHING;n.writeLogMessage=function(n,r){try{if(r){n=n.trim()+"\n"+(new Error("")).stack.replace(/^Error *\n/,"")}n=(new Date).toISOString()+": "+n.trim().replace(/\n/g,"\n> ")}catch(i){}try{if(e.console&&e.console.log){e.console.log(n);return}}catch(i){}try{if(e.alert){e.alert(n);return}}catch(i){}};n.internalErrorNoInterpolate=function(t){n.writeLogMessage("[INTERNAL-ERROR] "+t,true)};n.errorNoInterpolate=function(t){if(n.logLevel>=n.LOG_ERRORS){n.writeLogMessage("[ERROR] "+t)}};n.warningNoInterpolate=function(t){if(n.logLevel>=n.LOG_WARNINGS){n.writeLogMessage("[WARNING] "+t)}};n.infoNoInterpolate=function(t){if(n.logLevel>=n.LOG_INFO){n.writeLogMessage("[INFO] "+t)}};n.debugNoInterpolate=function(t){if(n.logLevel>=n.LOG_DEBUG){n.writeLogMessage("[DEBUG] "+t)}};n.deg2rad=Math.PI/180;n.rad2deg=180/Math.PI;n.sinDeg=function(t){return Math.sin(n.deg2rad*t)};n.cosDeg=function(t){return Math.cos(n.deg2rad*t)};n.tanDeg=function(t){return Math.tan(n.deg2rad*t)};n.asinDeg=function(t){return n.rad2deg*n.asinRad(t)};n.acosDeg=function(t){return n.rad2deg*n.acosRad(t)};n.atanDeg=function(t){return n.rad2deg*n.atanRad(t)};n.atan2Deg=function(t,r){return n.rad2deg*n.atan2Rad(t,r)};n.sinRad=Math.sin;n.cosRad=Math.cos;n.tanRad=Math.tan;n.asinRad=function(t){return Math.asin(t<-1?-1:t>+1?+1:t)};n.acosRad=function(t){return Math.acos(t<-1?-1:t>+1?+1:t)};n.atanRad=Math.atan;n.atan2Rad=Math.atan2;n.toSource=function(r,i,s){var o;var u=n.typeName(r);switch(u){case"undefined":case"null":o=u;break;case"number":case"Number":case"boolean":case"Boolean":case"function":case"undefined":case"RegExp":o=String(r);break;case"string":case"String":case"Object":case"Array":o=JSON.stringify(r,void 0,i);break;case"Date":o="new "+u+"("+r.valueOf()+")";break;default:o="new "+u+"("+JSON.stringify(r,void 0,i)+")";break}return typeof s==="number"&&o.length>s?o.slice(0,Math.max(s-7,1))+t:o};n.repeat=function(t,r){var i=function s(e){var n;if(e%2){n=s((e-1)/2);return n+n+t}if(e){n=s(e/2);return n+n}return""};if(r<0||r!==r||r>n.uint32.max||r===Infinity){throw new RangeError}t=String(t);return i(n.uint32(r))};n.head=function(t,n,r){t=String(t);return typeof n!=="number"||n!==n||t.length<=n?t:!r?t.slice(0,Math.max(n,0)):r.length<=n?t.slice(0,n-r.length)+r:r.slice(0,Math.max(n,0))};n.justified=function(t,r,i,s,o){var u;r=String(r);if(i>r.length){u=n.repeat((s||" ").charAt(0),i-r.length);if(t==="left"){r+=u}else if(t==="center"){r=u.substr(0,u.length>>1)+r+u.substr(u.length>>1)}else if(t==="right"){r=u+r}else{throw new Error("Invalid justification-direction: "+t)}}if(typeof o==="number"&&r.length>o){r=r.slice(0,o)}return r};n.leftJustified=n.justified.bind(void 0,"left");n.rightJustified=n.justified.bind(void 0,"right");n.centered=n.justified.bind(void 0,"center");n.toTitleCase=function(t){return String(t).replace(/([a-zA-Z0-9])([a-zA-Z0-9\']*)/g,function(t,n,r){return n.toUpperCase()+r.toLowerCase()})};n.textToHtml=function(){var e={"<":"&lt;",">":"&gt;","&":"&","'":"&#39;",'"':"&quot;","\r":"<br>","\n":"<br>","\u2028":"<br>","\u2029":"<br>","\r\n":"<br>"};return function(n){return String(n).replace(/^\s+|\s+$|\s{2,}|[\r\n\u2028\u2029]|[<>&'"]|[^ -~\s]/g,function(n){return e[n]||n.replace(/(\r\n|\s)|[\w\W]/g,function(n,r){return e[n]||(r?"&nbsp;":"&#"+n.charCodeAt(0)+";")})})}}();n.textToUriComponent=function(t){return encodeURIComponent(String(t)).replace(/%20|[!'()*]/g,function(t){return r[t]})};var r={"%20":"+","!":"%21","'":"%27","(":"%28",")":"%29","*":"%2A"};n.allMatches=function(t,r,i,s){var o=[];var u=new n.Parser(r,i||0);s=Math.min(typeof s==="number"?s:Infinity,t.global?Infinity:1);while(o.length<s&&u.skipTo(t,void 0,o.length!==0).result){o.push(u.result)}return o};var i={object:{source:function(r,i){var s=n.toSource(this,r);return typeof i==="number"?n.head(s,i,t):s},keys:function(){return Object.keys(this)},join:function(t){return this.join(t)}},string:{uppercase:function(){return String(this).toUpperCase()},lowercase:function(){return String(this).toLowerCase()},titlecase:function(){return n.toTitleCase(this)},alignLeft:function(t,r){return n.leftJustified(this,t,r)},alignRight:function(t,r){return n.rightJustified(this,t,r)},alignCenter:function(t,r){return n.centered(this,t,r)},head:function(t,r){return n.head(this,t,r)},tail:function(t){return String(this).slice(-t)},charAt:function(t){return String(this).charAt(t)},slice:function(t,n){return String(this).slice(t,n)},html:function(){return n.textToHtml(String(this))},uriComponent:function(){return n.textToUriComponent(String(this))}},number:{currency:function(t){return n.numberToCurrency(this,t)},commas:function(t){return n.numberToLocale(this,t)},round:function(t){return n.round(this,t)}}};var s=function(t,r,s){var o,u;if(!o&&i[typeof t]&&i[typeof t][r]){o=[t,i[typeof t][r]]}if(!o&&typeof t==="object"){try{if(r in t){o=[t,t[r]]}}catch(a){}}if(!o&&typeof t!=="object"){try{if(r in Object(t)){o=[Object(t),Object(t)[r]]}}catch(a){}}if(!o&&i.string[r]){try{o=[t==null?"":String(t),i.string[r]]}catch(a){}}if(!o&&i.object[r]){try{o=[Object(t),i.object[r]]}catch(a){}}if(!o){n.warningNoInterpolate("rta.interpolate(): No "+n.toSource(r)+" property in "+n.toSource(t,void 0,30));u=void 0}else if(typeof o[1]==="function"){try{u=o[1].apply(o[0],s||[])}catch(a){n.warningNoInterpolate("rta.interpolate(): "+("message"in a?a.message:a)+("stack"in a?"\n"+a.stack:""));u=void 0}}else if(s){n.warningNoInterpolate("rta.interpolate(): "+r+" is a non-method of "+n.toSource(t,void 0,30));u=o[1]}else{u=o[1]}return u};n.interpolate=function(t,r){var i=new n.Parser(t);var o="";while(i.skipTo(/\{\{?|\}\}?/).result){o+=i.skippedChars();if(i.result[0]==="{"){i.eat(/([$_a-zA-Z][$_a-zA-Z0-9]*)|(\d+)/).elseThrow(typeof r==="object"?"name or index":"index");var u=i.result[1]?r:Array.prototype.slice.call(arguments,1);do{var a=i.result[1]||Number(i.result[2]);if(i.eat("(").result){u=s(u,a,i.eatMulti(/\s*([-+]?(?:\d+\.?\d*|\.\d+)(?:[Ee][-+]?\d+)?)|\s*\'([^\']*)\'|\s*\"([^\"]*)\"/,/,\s*/).map(function(t){return t[1]?Number(t[1]):t[2]!=null?t[2]:t[3]}));i.eat(")").elseThrow()}else{u=s(u,a)}}while(i.eat(/\.([a-zA-Z_$][a-zA-Z_$0-9]*)|\[(\d+)\]/).result);o+=u===null||u===void 0?"":u;i.eat("}").elseThrow()}else if(i.result[0]==="}"){n.errorNoInterpolate('rta.interpolate(): template has an extra/dangling "}"')}else{o+=i.result[0][0]}}o+=i.nextSrc();return o};n.interpolateNoThrow=function(){try{return n.interpolate.apply(void 0,arguments)}catch(t){return Array.prototype.slice.call(arguments,0).map(function(t){return n.toSource(t)}).join(", ")}};var o=new RegExp([/[^\"\'\/\{\}]+/.source,/\"(?:[^\"\\]|\\[\s\S])*\"/.source,/\'(?:[^\'\\]|\\[\s\S])*\'/.source,/\/(?:\/[^\n]*|\*[\s\S]*?\*\/|(?![\/\*]))/.source].join("|"));n.quasiArray=function(t){var r=new n.Parser(t);var i=function(){while(r.eat(o).result){}};var s=function f(){i();while(r.eat("{").result){f();r.eat("}").elseThrow();i()}};var u=[];var a;while(r.skipTo(/\$\{/).result){a=r.beginMatch;u.push(JSON.stringify(r.skippedChars()));s();r.eat("}").elseThrow();u.push(r.src.slice(a+2,r.beginMatch));if(u[u.length-1].trim().length===0){n.errorNoInterpolate("rta.quasi(): substitution-expression is empty: "+r.src.slice(a,r.endMatch));throw new Error("Substitution-expression is empty: "+r.src.slice(a,r.endMatch))}}u.push(JSON.stringify(r.nextSrc()));return u};n.quasi=function(t){return"["+n.quasiArray(t).join(", ")+'].join("")'};n.Parser=function(t,n){this.src=t;this.result=null;this.target=null;this.beginScan=n||0;this.beginMatch=n||0;this.endMatch=n||0};var u={};var a={};n.Parser.prototype.isBof=function(){return this.endMatch===0};n.Parser.prototype.isEof=function(){return this.endMatch===this.src.length};n.Parser.prototype.skipTo=function(t,n,r){var i=this;var s;if(t.source){s=u[t.source]||(u[t.source]=new RegExp(t.source,"g"+(t.multiline?"m":"")+(t.ignoreCase?"i":"")))}else{s=a[t]||(a[t]=new RegExp(String(t).replace(/[^\s\w]/g,"\\$&"),"g"))}i.target=t;s.lastIndex=i.beginMatch=i.endMatch+(r&&i.beginScan===i.endMatch?1:0);i.beginScan=i.endMatch;i.result=s.exec(i.src);if(i.result&&typeof n==="number"&&i.result.index-i.beginScan>n){i.result=null}if(i.result){i.beginMatch=i.result.index;i.endMatch=s.lastIndex}return i};n.Parser.prototype.eat=function(t,n){return this.skipTo(t,0,n)};n.Parser.prototype.elseThrow=function(t){if(!this.result){throw new Error(typeof t==="function"?t(this):n.interpolate("Missing {0} between {1.prevSrc(10).source} and {1.nextSrc(10).source}",t||this.target,this))}return this};n.Parser.prototype.eatMulti=function(t,n,r){var i=[];this.forEach(t,n,function(t){i.push(t);return typeof r!=="number"||i.length<r});return i};n.Parser.prototype.forEach=function(t,n,r){var i=this;if(!r&&typeof n==="function"){r=n;n=void 0}i.eat(t);var s;var o=null;var u=0;while(i.result&&r(i.result,u++,o)!==false){s=i.state();if(!n||(o=i.eat(n).result)){if(i.endMatch===s.beginScan){i.endMatch++}i.eat(t)}}if(!i.result&&s){i.revertTo(s)}return i};n.Parser.prototype.numSkippedChars=function(){return this.beginMatch-this.beginScan};n.Parser.prototype.skippedChars=function(){return this.src.slice(this.beginScan,this.beginMatch)};n.Parser.prototype.linenum=function(){return(this.src.slice(0,this.beginMatch).match(/\n/g)||[]).length+1};n.Parser.prototype.prevSrc=function(t){var n=typeof t==="number"?Math.max(0,this.endMatch-t):0;return this.src.slice(n,this.endMatch)};n.Parser.prototype.nextSrc=function(t){var n=typeof t==="number"?this.endMatch+Math.max(t,0):void 0;return this.src.slice(this.endMatch,n)};n.Parser.prototype.context=function(t,n){var r=Math.max(0,this.endMatch+t);var i=typeof n==="number"?Math.max(0,this.endMatch+n):void 0;return this.src.slice(r,i)};n.Parser.prototype.state=function(){return{target:this.target,result:this.result,beginScan:this.beginScan,beginMatch:this.beginMatch,endMatch:this.endMatch}};n.Parser.prototype.revertTo=function(t){this.target=t.target;this.result=t.result;this.beginScan=t.beginScan;this.beginMatch=t.beginMatch;this.endMatch=t.endMatch;return this};n.defaultLocaleName="en-US";n.defaultCurrencyName="USD";n.defaultCurrencyPrecision=2;n.int32=function(t){return t>>0};n.int32.max=n.int32(2147483647);n.int32.min=n.int32(-2147483648);n.uint32=function(t){return t>>>0};n.uint32.max=n.uint32(4294967295);n.uint32.min=n.uint32(0);n.isInteger=function(){return typeof Number.isInteger==="function"?Number.isInteger:function(t){return typeof t==="number"&&isFinite(t)&&t>=-9007199254740992&&t<=9007199254740991&&Math.floor(t)===t}}();n.round=function(t,n){var r=n?Math.pow(10,n):1;return Math.round(t*r)/r};n.numberToLocale=function(t,r,i){var s=typeof r==="number"?r:3;return t.toLocaleString(i||n.defaultLocaleName,{maximumFractionDigits:s,minimumFractionDigits:s})};n.numberToCurrency=function(t,r,i,s){return typeof r!=="number"?t.toLocaleString(i||n.defaultLocaleName,{style:"currency",currency:s||n.defaultCurrencyName,minimumFractionDigits:r,maximumFractionDigits:r}):t.toLocaleString(i||n.defaultLocaleName,{style:"currency",currency:s||n.defaultCurrencyName})};try{if(n.numberToLocale(12345678.2345678,void 0,"en-US")!=="12,345,678.235"||n.numberToLocale(-12345678.2345678,5,"en-US")!=="-12,345,678.23457"){throw new Error("Number.toLocaleString() gave wrong results")}}catch(f){n.warningNoInterpolate("Rolling our own rta.numberToLocale(): "+f.message);n.numberToLocale=function(t,n){var r=typeof n==="number"?n:3;return(t<0?"-":"")+Math.abs(t).toFixed(r).replace(/^\d+/,function(t){var n="";while(t.length>3){n=","+t.slice(-3)+n;t=t.slice(0,-3)}return t+n})}}try{if(n.numberToCurrency(12345678.5678,void 0,"en-US","USD")!=="$12,345,678.57"||n.numberToCurrency(-12345678.5678,5,"en-US","USD")!=="($12,345,678.56780)"){throw new Error("Number.toLocaleString() gave wrong results")}}catch(f){n.warningNoInterpolate("Rolling our own rta.numberToCurrency(): "+f.message);n.numberToCurrency=function(t,r,i,s){s=s||n.defaultCurrencyName;return(t<0?"(":"")+(s==="USD"?"$":"")+n.numberToLocale(Math.abs(t),typeof r==="number"?r:2,i)+(s==="USD"?"":" "+s)+(t<0?")":"")}}n.parseNumberStrict=function(t,n,r,i,s){var o;if(typeof t==="number"){o=t;if(o!==o?s:!isFinite(o)?i:r?true:o===Math.floor(o)){return o}}else{if(/^[-+]?\d+$/i.test(t)){o=parseInt(t,10);if(o===o&&(isFinite(o)||i)){return o}}else if(/^[-+]?0x[0-9A-F]+$/i.test(t)){o=parseInt(t,16);if(o===o&&(isFinite(o)||i)){return o}}else if(r&&/^[-+]?(?:\d+\.?\d*|\.\d+)(?:[Ee][-+]?\d+)?$/.test(t)){o=parseFloat(t);if(o===o&&(isFinite(o)||i)){return o}}else if(s&&String(t)==="NaN"){return NaN}else if(i&&/^[-+]?Infinity$/.test(t)){return String(t)[0]==="-"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY}}return typeof n==="function"?n(t):n};n.parseFloatStrict=function(t,r,i,s){return n.parseNumberStrict(t,r,true,i,s)};n.parseIntStrict=function(t,r,i,s){return n.parseNumberStrict(t,r,false,i,s)};n.internalError=function(){n.internalErrorNoInterpolate(n.interpolateNoThrow.apply(void 0,arguments))};n.error=function(){if(n.logLevel>=n.LOG_ERRORS){n.errorNoInterpolate(n.interpolateNoThrow.apply(void 0,arguments))}};n.warning=function(){if(n.logLevel>=n.LOG_WARNINGS){n.warningNoInterpolate(n.interpolateNoThrow.apply(void 0,arguments))}};n.info=function(){if(n.logLevel>=n.LOG_INFO){n.infoNoInterpolate(n.interpolateNoThrow.apply(void 0,arguments))}};n.debug=function(){if(n.logLevel>=n.LOG_DEBUG){n.debugNoInterpolate(n.interpolateNoThrow.apply(void 0,arguments))}};n.range=function(t,n){if(typeof n!=="number"){n=t;t=0}var r=[];while(t<n){r.push(t++)}return r};n.distinct=function(t,n){var r={};return t.filter(function(t,i){var s=n?n(t,i):t;return(r[s]=1+(r[s]||0))===1})};n.flattenArrayOnce=function(t){return Array.prototype.concat.apply([],t)};n.flattenArrayAll=function(t){return t.reduce(function(t,r){return t.concat(Array.isArray(r)?n.flattenArrayAll(r):[r])},[])};n.sort=function(t,n,r){return t.map(function(t){return{elem:t,key:n(t)}}).sort(function(t,n){return r(t.key,n.key)}).map(function(t){return t.elem})};n.typeName=function(t){if(typeof t!=="object"){return typeof t}if(t===null){return"null"}try{if(t._rtaTypeName){return t._rtaTypeName}}catch(n){}try{if(t.constructor&&t.constructor.name){return t.constructor.name}}catch(n){}try{return Object.prototype.toString.call(t).replace(/^\[object |\]$/gi,"")}catch(n){}return typeof t};n.inPlaceExtendObject=function(t){Array.prototype.slice.call(arguments,1).forEach(function(n){var r;if(n){for(r in n){if(n.hasOwnProperty(r)){t[r]=n[r]}}}});return t};n.objectUnion=function(){var t={};Array.prototype.forEach.call(arguments,function(n){var r;if(n){for(r in n){if(n.hasOwnProperty(r)){t[r]=n[r]}}}});return t};n.applyDefaults=function(t){return Array.prototype.slice.call(arguments,1).concat(t).reduce(function(t,n){var r;if(n){for(r in n){if(n.hasOwnProperty(r)&&n[r]!==void 0){t[r]=n[r]}}}return t},{})};n.shallowCopy=function(t){var n={};for(var r in t){if(t.hasOwnProperty(r)){n[r]=t[r]}}return n};n.pseudoShallowCopy=function(t){var n=function(){};n.prototype=t;return new n};n.parseCsvAsRows=function(t,n,r){var i=/([^\"\,\n\r]+)|\"((?:[^\"]|\"\")*)\"|([,\n]|\r\n?)/g;var s=/\"\"/g;var o=/^\s+/;var u=/\s+$/;var a=0;var f=[""];var l=0;var c=0;var h;while(!!(h=i.exec(t))&&h.index===l){if(h[1]!==void 0){var p=h[1];if(l===0||t[l-1]!=='"'){p=p.replace(o,"")}if(t[i.lastIndex]!=='"'){p=p.replace(u,"")}f[f.length-1]+=p}else if(h[2]!==void 0){f[f.length-1]+=h[2].replace(s,'"')}else if(h[3]===","){f.push("")}else{f=f.length===1&&f[0].length===0?[]:f;if(f.length||n){while(c){if(r([],a++)===false){return a}c--}if(r(f,a++)===false){return a}}else{c++}f=[""]}l+=h[0].length}if(l!==t.length){throw new Error("Malformed CSV at row "+(a+c)+", field "+(f.length-1)+": "+t.slice(l,l+10).replace(/\r/g,"<CR>").replace(/\n/g,"<LF>"))}f=f.length===1&&f[0].length===0?[]:f;if(f.length||n){while(c){if(r([],a++)===false){return a}c--}if(r(f,a++)===false){return a}}return a};n.parseCsvAsObjects=function(t,r){var i;return n.parseCsvAsRows(t,false,function(e,t){var n,s,o;if(t===0){i=e}else{n={};s=i.length;for(o=0;o<s;o++){n[i[o]]=o<e.length?e[o]:""}r(n,t-1,e,i)}})-1};n.parseCsvAsArrayOfRows=function(t,r){var i=[];n.parseCsvAsRows(t,r,function(t){i.push(t)});return i};n.parseCsvAsArrayOfObjects=function(t){var r=[];n.parseCsvAsObjects(t,function(t){r.push(t)});return r};n.makeCsv=function(t){return t.map(function(t){return t.map(function(t){return/^\s|[,\"\n\r]|\s$/.test(String(t))?'"'+String(t).replace(/\"/g,'""')+'"':String(t)}).join(",")}).join("\n")};n.http=function(t,r){t=typeof t==="string"?{uri:t}:t;n.debug("rta.http({0.source})",t);var i=XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");var s=n.applyDefaults(t.headers,{"X-Requested-With":"XMLHttpRequest"},t.parseJson?{Accept:"application/json"}:null);var o={isSuccess:void 0,status:void 0,statusText:void 0,body:void 0,parsed:void 0,headers:{},request:t};if(s.Accept){s.Accept="*"+"/"+"*"}i.open(t.method||"GET",t.uri,true,t.username,t.password);i.timeout=t.timeout||0;Object.keys(s).forEach(function(e){try{i.setRequestHeader(e,s[e])}catch(t){}});if(r){i.onreadystatechange=function(){if(i.readyState===i.HEADERS_RECEIVED){n.allMatches(/^([^\s:]+):[ \t]*([^\r\n]*)\r?$/mg,i.getAllResponseHeaders()).forEach(function(e){o.headers[e[1].toLowerCase()]=e[2]})}else if(i.readyState===i.DONE){o.isSuccess=i.status>=200&&i.status<300||i.status===304;o.status=i.status;o.statusText=i.statusText;o.body=i.responseText;if(o.isSuccess&&t.parseJson){try{o.parsed=JSON.parse(i.responseText)}catch(s){try{o.parsed=n.parseCsvAsArrayOfRows(i.responseText)}catch(u){o.isSuccess=false;o.statusText="Neither JSON ("+(s.message||s)+") nor CSV ("+(u.message||u)+")";o.parsed=null}}}r(o)}}}i.send(t.body)};n.httpMulti=function(t,r,i){var s=[];t.forEach(function(e){n.http(e,function(e){if(r){r(e)}s.push(e);if(i&&s.length===t.length){i(s)}})});if(!t.length&&i){i([])}};var l=[["miles","mi",true,6371009*100/12/2.54/5280],["yards","yd",true,6371009*100/12/2.54/3],["feet","ft",true,6371009*100/12/2.54],["kilometers","km",true,6371009/1e3],["meters","m",true,6371009],["radians","rad",false,1],["degrees","deg",false,n.rad2deg]].reduce(function(e,t){e[t[0]]=e[t[1]]={longName:t[0],shortName:t[1],isLinear:t[2],earthRadius:t[3]};return e},{});var c=function(t,r){var i=String(t||"miles").toLowerCase().trim();var s=l[i]||l[i+"s"]||l[i.replace(/s$/,"")];if(!s){n.error('Unknown distance units {0.source}; expected one of {1.keys.join(", ")}',t,l);if(r){throw new Error("Bad distance units: "+n.toSource(t))}}return s};n.earthRadius=function(t){return c(t,true).earthRadius};n.canonicalDistanceUnitName=function(t,n,r){var i=c(t,n);return!i?void 0:r?i.shortName:i.longName};n.distanceUnitNames=function(){return Object.keys(l)};n.GeoPos=google.maps.LatLng;n.GeoPos.prototype._rtaTypeName="GeoPos";n.GeoPos.prototype.vectorTo=function(t,n){var r=c(n,true);return{bearing:this.bearingTo(t),distance:this.distanceTo(t,r.longName),distanceUnits:r.longName}};n.GeoPos.prototype.distanceTo=function(t,r){t=t.geoPos||t;t=Array.isArray(t)?new n.GeoPos(t[0],t[1]):t;return n.earthRadius(r)*n.acosRad(n.cosDeg(this.lat())*n.cosDeg(t.lat())*n.cosDeg(this.lng()-t.lng())+n.sinDeg(this.lat())*n.sinDeg(t.lat()))};n.GeoPos.prototype.bearingTo=function(t){var r=-n.rad2deg*n.atan2Rad(n.sinDeg(this.lng()-t.lng())*n.cosDeg(t.lat()),n.cosDeg(this.lat())*n.sinDeg(t.lat())-n.sinDeg(this.lat())*n.cosDeg(t.lat())*n.cosDeg(this.lng()-t.lng()));return(r+3600)%360};n.GeoPos.prototype.addVector=function(t){if(typeof t==="number"){t={bearing:arguments[0],distance:arguments[1],distanceUnits:arguments[2]}}var r=t.distance/n.earthRadius(t.distanceUnits);var i=n.asinRad(n.sinDeg(this.lat())*n.cosRad(r)+n.cosDeg(this.lat())*n.sinRad(r)*n.cosDeg(t.bearing));var s=n.deg2rad*this.lng()+n.atan2Rad(n.sinDeg(t.bearing)*n.sinRad(r)*n.cosDeg(this.lat()),n.cosRad(r)-n.sinDeg(this.lat())*n.sinRad(i));return new n.GeoPos(n.rad2deg*i,n.rad2deg*s)};n.GeoPos.prototype.geoBox=function(t,r,i){var s=c(i,true);var o=n.rad2deg/s.earthRadius;var u=o*t;var a=o*r*(s.isLinear?n.cosDeg(this.lat()):1);return new n.GeoBox(new n.GeoPos(this.lat()-u/2,this.lng()-a/2),new n.GeoPos(this.lat()+u/2,this.lng()+a/2))};n.GeoPos.prototype.toJSON=function(){return{lat:this.lat(),lng:this.lng()}};var h=google.maps.LatLngBounds.prototype.contains;n.GeoBox=google.maps.LatLngBounds;n.GeoBox.prototype._rtaTypeName="GeoBox";n.GeoBox.prototype.clone=function(){return new n.GeoBox(this.sw(),this.ne())};n.GeoBox.prototype.contains=function(t){t=t.geoPos||t;t=Array.isArray(t)?new n.GeoPos(t[0],t[1]):t;return h.call(this,t)};n.GeoBox.prototype.geoBox=n.GeoBox.prototype.clone;n.GeoBox.prototype.sw=google.maps.LatLngBounds.prototype.getSouthWest;n.GeoBox.prototype.ne=google.maps.LatLngBounds.prototype.getNorthEast;n.GeoBox.prototype.nw=function(){return new n.GeoPos(this.ne().lat(),this.sw().lng())};n.GeoBox.prototype.se=function(){return new n.GeoPos(this.sw().lat(),this.ne().lng())};n.GeoBox.prototype.height=function(t){var r=this.ne().lat()-this.sw().lat();var i=n.earthRadius(t)/n.rad2deg;return r*i};n.GeoBox.prototype.width=function(t){var r=c(t,true);var i=(this.ne().lat()+this.sw().lat())/2;var s=this.ne().lng()-this.sw().lng();var o=r.earthRadius/n.rad2deg;return s*o/(r.isLinear?n.cosDeg(i):1)};n.GeoBox.prototype.intersection=function(t){var r=Math.max(this.sw().lat(),t.sw().lat());var i=Math.min(this.ne().lat(),t.ne().lat());var s=Math.max(this.sw().lng(),t.sw().lng());var o=Math.min(this.ne().lng(),t.ne().lng());return r<=i&&s<=o?new n.GeoBox(new n.GeoPos(r,s),new n.GeoPos(i,o)):null};n.GeoBox.prototype.toJSON=function(){return{sw:this.sw(),ne:this.ne()}};n.GeoCircle=function(t,r,i){t=t.geoPos||t;t=Array.isArray(t)?new n.GeoPos(t[0],t[1]):t;this.center=t;this.radius=r;this.units=i||"miles"};n.GeoCircle.prototype.clone=function(){return new n.GeoCircle(this.center,this.radius,this.units)};n.GeoCircle.prototype.contains=function(t){return this.center.distanceTo(t,this.units)<=this.radius};n.GeoCircle.prototype.geoBox=function(){return this.center.geoBox(2*this.radius,2*this.radius,this.units)};n.GeoPolygon=function(t){this.vertices=t?t.slice(0):[]};n.GeoPolygon.prototype.clone=function(){return new n.GeoPolygon(this.vertices)};n.GeoPolygon.prototype.contains=function(t){var r=this;t=t.geoPos||t;t=Array.isArray(t)?new n.GeoPos(t[0],t[1]):t;var i=t.lat();var s=t.lng();return r.vertices.reduce(function(e,t,n){var o=r.vertices[(n+1)%r.vertices.length];if(s>t.lng()&&s<=o.lng()||s>o.lng()&&s<=t.lng()){if(t.lat()+(s-t.lng())/(o.lng()-t.lng())*(o.lat()-t.lat())<i){return!e}}return e},false)};n.GeoPolygon.prototype.geoBox=function(){return this.vertices.reduce(function(t,n){return t.extend(n)},new n.GeoBox)};n.GeoPatches=function(t){this.regions=[];if(t){this.add(t)}};n.GeoPatches.prototype.add=function(t){var n=this;var r=Array.isArray(t)?t:[t];n.regions.push.apply(n.regions,r.map(function(e){return e.clone()}));return n};n.GeoPatches.prototype.clone=function(){return new n.GeoPatches(this.regions)};n.GeoPatches.prototype.contains=function(t){t=t.geoPos||t;t=Array.isArray(t)?new n.GeoPos(t[0],t[1]):t;return self.regions.reduce(function(n,r){return n+(r.contains(t)?1:0)},0)%2?true:false};n.GeoPatches.prototype.geoBox=function(){return this.vertices.reduce(function(t,n){var r=n.geoBox();return t.extend(r.sw()).extend(r.ne())},new n.GeoBox)};var p=function(t,n){return t+" County, "+n};var d={};var v={};[[4,"Collin","Texas",32.981519163756026,-96.84412175672682,33.40546471571436,-96.29438608218096,50,50,.0231,"http://"+(window.location.href.slice(0,4)==="file"?"localhost":"www.leadelitepro.com")+":61116/data/texas/collin-county/parcel-grid/{0}","http://localhost:61116/data/texas/collin-county/county/{0}"],[4,"Dallas","Texas",32.545363374470355,-97.03838539666411,32.98968862644958,-96.51731151934374,50,50,.0271,"http://"+(window.location.href.slice(0,4)==="file"?"localhost":"www.leadelitepro.com")+":61116/data/texas/dallas-county/parcel-grid/{0}","http://localhost:61116/data/texas/dallas-county/county/{0}"],[4,"Denton","Texas",32.987457719061965,-97.39851458126468,33.43034050693903,-96.83386800189818,50,50,.025,"http://"+(window.location.href.slice(0,4)==="file"?"localhost":"www.leadelitepro.com")+":61116/data/texas/denton-county/parcel-grid/{0}","http://localhost:61116/data/texas/denton-county/county/{0}"],[4,"Tarrant","Texas",32.54866230739841,-97.55297767366795,32.994003740732225,-97.03100719626592,50,50,.02734,"http://"+(window.location.href.slice(0,4)==="file"?"localhost":"www.leadelitepro.com")+":61116/data/texas/tarrant-county/parcel-grid/{0}","http://localhost:61116/data/texas/tarrant-county/county/{0}"]].forEach(function(e){v[p(e[1],e[2]).toLowerCase()]=e});n.County=function(t){if(t[0]===4&&t.length===12){this.unqualName=t[1];this.stateName=t[2];this.geoBox=new n.GeoBox(new n.GeoPos(t[3],t[4]),new n.GeoPos(t[5],t[6]));this.gridCountLat=t[7];this.gridCountLng=t[8];this.taxRate=t[9];this.gridElemUri=t[10]}else{n.internalError("Invalid county-raw-data: {0.source(2)}",t);throw new Error("Internal Error: invalid county-raw-data")}this.gridElem=this.gridCountLat*this.gridCountLng===1?[void 0]:new Array(this.gridCountLat*this.gridCountLng);this.fullName=p(this.unqualName,this.stateName)};n.County.names=function(){return Object.keys(v).map(function(t){var r=v[t];if(r[0]===1){return{countyName:r[1],stateName:r[2],box:new n.GeoBox(new n.GeoPos(r[3],r[4]),new n.GeoPos(r[5],r[6]))}}else{n.internalError("Invalid county-raw-data: {0.source(2)}",r);throw new Error("Internal Error: invalid county-raw-data")}})};n.County.byName=function(t,r){var i=p(t,r).toLowerCase();var s=d[i];if(s){return s}var o=v[i];if(!o){n.error("Unsupported County: {0}",p(t,r));throw new Error("Unsupported County: "+p(t,r))}n.debug("new rta.County({0[1].source}, {0[2].source}); this is County object# {1}",o,Object.keys(d).length+1);s=d[i]=new n.County(o);return s};n.County.byGeocoderResult=function(t){var r,i,s;t.address_components.forEach(function(t){if(t.types[0]==="administrative_area_level_2"){r=t.long_name;s=r.indexOf(" County");if(s<0)s=r.length;r=r.slice(0,s)}else if(t.types[0]==="administrative_area_level_1"){i=t.long_name}});return n.County.byName(r||"?",i||"?")};n.County.prototype.getParcels=function(t,r){var i=this;var s=[];var o=i.geoBox.intersection(t.geoBox());if(o){var u=function(t,n,r,i){var s=Math.floor(t*(n-r)/(i-r));return s<0?0:s>=t?t-1:s};var a=u(i.gridCountLat,o.sw().lat(),i.geoBox.sw().lat(),i.geoBox.ne().lat());var f=u(i.gridCountLat,o.ne().lat(),i.geoBox.sw().lat(),i.geoBox.ne().lat());var l=u(i.gridCountLng,o.sw().lng(),i.geoBox.sw().lng(),i.geoBox.ne().lng());var c=u(i.gridCountLng,o.ne().lng(),i.geoBox.sw().lng(),i.geoBox.ne().lng());for(var h=a;h<=f;h++){for(var p=l;p<=c;p++){s.push(i.gridCountLng*h+p)}}}var d=s.filter(function(t){return!i.gridElem[t]}).map(function(t){return{method:"GET",uri:n.interpolate(i.gridElemUri,t),parseJson:true,gridIndex:t}});n.httpMulti(d,function(t){if(i.gridElem[t.request.gridIndex]){}else if(t.isSuccess&&t.parsed){i.gridElem[t.request.gridIndex]=t.parsed.map(function(e,t){return new n.Parcel(e,i)})}else{n.error("Cannot Load Grid-Elem: {0.statusText}",t)}},function(){if(r){r(n.flattenArrayOnce(s.map(function(n){return(i.gridElem[n]||[]).filter(function(n){return t.contains(n)})})))}})};var m=function(t,n){return(n?n.toString():"no-geo-box")+": "+t.trim().toLowerCase()};var g={};n.geocode=function(t,r,i,s,o,u){i=typeof i==="number"&&i===i?i:0;s=typeof s==="number"&&s===s?s:1;o=o||function(){};u=u||function(){};var a=function(n){if(n.length<i){u({message:n.length===0?"Unknown Address":n.length===1?"Unambiguous Address":"Not Ambiguous Enough",address:n.length?n.map(function(t){return t.formatted_address}).join("\n"):t})}else if(n.length>s){u({message:s===0?"Not Unknown":s===1?"Ambiguous Address":"Address is Too Ambiguous",address:n.length?n.map(function(t){return t.formatted_address}).join("\n"):t})}else{o(n)}};var f=!r||n.typeName(r)==="GeoBox"?r:r.geoBox&&typeof r.geoBox==="function"?r.geoBox():r.geoBox?r.geoBox:r;var l=Date.now();var c=m(t,f);var h=g[c];if(h){h.whenUsed=l;a(h.results);return void 0}(new google.maps.Geocoder).geocode({address:t},function(r,i){r=n.distinct(r||[],function(t){return t.formatted_address.toLowerCase()});if(i===google.maps.GeocoderStatus.OK||i===google.maps.GeocoderStatus.ZERO_RESULTS){g[c]={whenConfirmed:l,whenUsed:l,results:r};a(r)}else{u({message:"Geocoder "+n.toTitleCase(i.replace(/_/g," ")),address:t})}})};var y=[{index:0,name:"SQFT",toSqftFactor:1},{index:1,name:"ACRE",toSqftFactor:43560},{index:2,name:"UNKNOWN",toSqftFactor:0},{index:3,name:"LOT",toSqftFactor:0},{index:4,name:"FRONTFT",toSqftFactor:0}];var b=n.LANDUOM={};y.forEach(function(e){b[e.name]=e});b["FLAT"]=b.LOT;b["FLAT PRICE"]=b.LOT;b["SQUARE FEET"]=b["SQUARE FOOT"]=b.SQFT;b["FRONT FEET"]=b["FRONT FOOT"]=b.FRONTFT;b["UNASSIGNED"]=b["MIXED"]=b[""]=b.UNKNOWN;var w=["Unsound","Very Poor","Poor","Fair","Average","Good","Very Good","Excellent","Unknown"];var E={};w.forEach(function(t,n){E[t.replace(/ /g,"").toLowerCase()]=n});n.Parcel=function(t,r){function o(e,r){var i=t[e];if(r&&!r.test(i)){c(e,"does not match "+n.toSource(r))}return i}function u(e,n,r,i){var s=t[e];var o=!Array.isArray(s)?"is not an array":typeof r==="number"&&s.length<r?"fewer than "+r+" elems":typeof i==="number"&&s.length>i?"more than "+i+" elems":n&&s.some(function(e){return typeof e!==n})?"has non-"+n+" elems":null;if(o){c(e,o);s=[];if(r){var u=!n||n==="string"?"x":n==="number"?0:"?";while(s.length<r){s.push(u)}}}return s}function a(e,n,r){var i=t[e];if(typeof i!=="number"||i!==i){c(e,"not a number");i=typeof n!=="number"?0:typeof r!=="number"?n:Math.floor((n+r)/2)}else if(typeof n==="number"&&i<n){c(e,"less than "+n);i=n}else if(typeof r==="number"&&i>r){c(e,"greater than "+r);i=r}else if(i!==Math.floor(i)){c(e,"not a whole number");i=Math.floor(i)}return i}function f(e,n,r){var i=t[e];if(typeof i!=="number"||i!==i){c(e,"not a number");i=typeof n!=="number"?0:typeof r!=="number"?n:(n+r)/2}else if(typeof n==="number"&&i<n){c(e,"less than "+n);i=n}else if(typeof r==="number"&&i>r){c(e,"greater than "+r);i=r}return i}function l(e){switch(t[e]){case 1:return true;case-1:case 0:return false;default:c(e,"expected -1, 0, or 1");return false}}function c(e,r,i){var s=i?n.internalError:n.error;s("Bad v{raw[0]}-parcel data: raw[{i}] is {rawval.source} - {problem}\n	Raw version {raw[0]}, county {countyName}, gridIndex {raw[1]}, parcel ID {raw[2]}",{raw:t,i:e,problem:r,rawval:t[e],countyName:this.countyName})}this.countyName=r.fullName;this.county=r;this.gridIndex=a(1,0,r.gridCountLat*r.gridCountLng);this.id=t[2];this.parcelAcctIds=u(3,"string",1).join("/").replace(/\s+/g," ").trim();this.ownerNames=u(4,"string",1);this.partialAddress=u(5,void 0,1).join(" ").replace(/\s+/g," ").trim();this.geoPos=new n.GeoPos(f(6,-90,90),f(7,-180,180));this.lat=f(6,-90,90);this.lng=f(7,-180,180);this.houseVal=f(8,0,100*1e3*1e3);this.landVal=f(9,0,100*1e3*1e3);this.otherVal=f(10,0,100*1e3*1e3);this.houseNumSqft=a(11,0,100*1e3*1e3);var i=a(12,-1,5);this.landUom=i===-1||i===5||i===8?"UNKNOWN":y[i].name;this.landNumUnits=f(13,0);this.houseYearBuilt=Math.max(1900,a(14,-1,(new Date).getFullYear()));this.landValPerUnit=f(15,0,100*1e3*1e3);this.houseNumBedrooms=a(16,-1,20);this.houseNumFullBaths=a(17,-1,20);this.houseNumHalfBaths=a(18,-1,20);this.houseNumStories=f(19,-1,5);this.cduLevel=a(20,0,w.length-1);this.hasPool=a(21,-1,1);this.hasSpa=a(22,-1,1);this.hasSauna=a(23,-1,1);this.mapsco=o(24);this.ownerAddresses=u(25,"string",1);this.deedDate=o(26);var s=this.deedDate.indexOf(" ");this.deedDate=s<0?this.deedDate:this.deedDate.slice(0,s);this.homesteaded=a(27,-1,1);this.senior=a(28,-1,1);this.disabled=a(29,-1,1);this.vet=a(30,-1,1);this.homesteadable=a(31,-1,1);this.deferred=a(32,-1,1);this.totalTaxVal=parseFloat(o(33));this.totalTaxVal=Math.floor(this.totalTaxVal/100)*100;this.homesteadWorthVal=parseFloat(o(34));this.homesteadWorthVal=Math.floor(this.homesteadWorthVal/50)*50;this.ownerAddressDesc=this.ownerAddresses.join(" ").replace(/\s+/g," ").replace(/\b(\d\d\d)(\d\d\d)$/,"$1-$2").trim();this.ownerNameDesc=this.ownerNames.join(" ").replace(/\s+/g," ").replace(/\b(\d\d\d)(\d\d\d)$/,"$1-$2").trim();this.houseAge=(new Date).getFullYear()-this.houseYearBuilt;this.houseAgeDesc=this.houseYearBuilt==1900?"?":(new Date).getFullYear()-this.houseYearBuilt;this.houseYearBuiltDesc=this.houseYearBuilt==1900?"?":this.houseYearBuilt;this.cduName=w[this.cduLevel];this.totalVal=this.houseVal+this.landVal+this.otherVal;this.savingsWorth=this.totalVal==0?0:this.totalTaxVal/this.totalVal;this.houseValPerSqft=this.houseNumSqft?Math.min(399,this.houseVal/this.houseNumSqft):399;if(this.cduLevel==8)this.cduName="?";this.misc=(this.hasPool===1?"Pool ":"")+(this.hasSpa===1?" Spa ":"")+(this.hasSauna===1?" Sauna ":"").replace(/\s+/g," ").trim();if(this.misc.length===0){this.misc="None"}this.houseNumStoriesDesc=this.houseNumStories==-1?"?":this.houseNumStories.toString();this.deedDateDesc=this.deedDate===-1?"?":this.deedDate;this.homesteadedDesc=["?","No","Yes"][this.homesteaded+1];this.homesteadableDesc=["?","No","Yes"][this.homesteadable+1];this.seniorDesc=["?","No","Yes"][this.senior+1];this.disabledDesc=["?","No","Yes"][this.disabled+1];this.vetDesc=["?","No","Yes"][this.vet+1];this.deferredDesc=["?","No","Yes"][this.deferred+1];this.houseNumFullBathsDesc=this.houseNumFullBaths===-1?"?":this.houseNumFullBaths.toString();this.houseNumHalfBathsDesc=this.houseNumHalfBaths===-1?"?":this.houseNumHalfBaths.toString();this.houseNumBedroomsDesc=this.houseNumBedrooms===-1?"?":this.houseNumBedrooms.toString();this.totalValDesc="$ "+n.addCommas(this.totalVal);this.houseValDesc="$ "+n.addCommas(this.houseVal);this.landValDesc="$ "+n.addCommas(this.landVal);this.otherValDesc="$ "+n.addCommas(this.otherVal);this.totalTaxDesc="$ "+n.addCommas(this.totalTaxVal);this.homesteadWorthDesc="$ "+n.addCommas(this.homesteadWorthVal);this.houseNumSqftDesc=n.addCommas(this.houseNumSqft)+" sqft";this.landDesc=n.addCommas(this.landNumUnits)+" "+this.landUom};n.Parcel.byAddress=function(t,r,i,s){r=r||function(){};i=i||function(){};var o=1e3;var u="feet";var a=function(t,n){"use strict";var r=6371,i=t.lat,s=t.lng,o=n.lat(),u=n.lng(),a=(o-i)*Math.PI/180,f=(u-s)*Math.PI/180,l=Math.sin(a/2)*Math.sin(a/2)+Math.sin(f/2)*Math.sin(f/2)*Math.cos(i*Math.PI/180)*Math.cos(o*Math.PI/180),c=2*Math.atan2(Math.sqrt(l),Math.sqrt(1-l));return r*c*.62137119};n.geocode(t,s,1,1,function(t){var f=t[0];var l=f.formatted_address;var c=f.geometry.location;if(!f.types.some(function(t){return t==="street_address"})){i({message:"Not Residence: "+n.toTitleCase(f.types.join("/").replace(/_/g,"-")),address:l});return}var h;try{h=n.County.byGeocoderResult(f)}catch(p){i({message:p.message,address:l});return}if(n.typeName(s)==="County"&&h!==s){i({message:"Not In "+s.fullName,address:l});return}h.getParcels(new n.GeoCircle(c,o,u),function(t){var s=null;var o=n.Parcel.streetNumDo(l).toLowerCase();t.forEach(function(t,r){if(n.Parcel.streetNumDo(t.partialAddress).toLowerCase()===o&&(!s||a(t,c)<a(s,c))){s=t}});if(s){r({parcel:s,beautifiedAddress:l,geocodedPos:c})}else{i({message:"No Residential Property Record in Our Files",address:l})}})},i)};n.Parcel.prototype.county=function(){var t=d[this.countyName.toLowerCase()];if(!t){n.internalError("No such preexisting county-object at {countyName.source} for parcel {id}",this);throw new Error("Parcel has invalid/unknown county: "+this.countyName)}return t};n.Parcel.prototype.streetNum=function(){return n.Parcel.streetNumDo(this.partialAddress)};n.Parcel.streetNumDo=function(t){var n=t.match(/^\s*0*(\d+\w*)/);return n?n[1]:""};n.Parcel.prototype.distanceTo=function(t,n){return this.geoPos.distanceTo(t,n)};n.Parcel.prototype.getBeautifiedAddress=function(t,r){var i=this;t=t||function(){};r=r||function(){};n.Parcel.byAddress(i.partialAddress,function(s){if(s.parcel.id===i.id){t(s.beautifiedAddress,s.geocodedPos)}else{n.error("Wrong parcel returned from rta.Parcel.byAddress({0.partialAddress.source}, {0.countyName.source}): {1.source}",i,s);r({message:"Cannot Geocode",address:i.partialAddress})}},function(t){n.error("Cannot geocode parcel {0.partialAddress} in {0.countyName}: {1.message}",i,t);r(t)},i.county())};n.Parcel.prototype.getPotentialComps=function(t,n){var r=this;r.county.getParcels(t,function(t){n(t.filter(function(t){return t.houseValPerSqft&&t.houseValPerSqft<r.houseValPerSqft}))})};n.AssessedParcel=function(t,n){this.target=t;this.comps=n?n.slice(0):[]};n.AssessedParcel.prototype.autoselectComps=function(t,r){var i=this;var s=function(t,r,i,s){return n.parseNumberStrict(typeof r==="number"?r:r||i,function(){throw new Error("Invalid "+t+": "+r)},s)};var o=s("max-age-diff",t.maxAgeDiff,2,false);var u=s("max-distance",t.maxDistance,.5,true);var a=s("max-num-comps",t.maxNumComps,5,false);var f=9;var l=0;var a=5;var c="miles";this.target.county().getParcels(new n.GeoCircle(this.target.geoPos,u,c),function(t){i.comps=t.filter(function(t){return t.houseValPerSqft&&t.houseValPerSqft<this.target.houseValPerSqft&&t.houseYearBuilt>=this.target.houseYearBuilt-o}).sort(function(t,n){return t.houseValPerSqft-n.houseValPerSqft}).slice(0,a);r(i)})};n.AssessedParcel.prototype.averageComp=function(t){var n=this;return n.comps.reduce(function(n,r){return n+r[t]},0)/(n.comps.length||1)};n.AssessedParcel.prototype.newHouseVal=function(){var t=this;return this.target.houseNumSqft*t.averageComp("houseValPerSqft")};n.addCommas=function(t){var n=t.toString()+"";var r=n.split("."),i=r[0],s=r.length>1?"."+r[1]:"",o=/(\d+)(\d{3})/;while(o.test(i)){i=i.replace(o,"$1"+","+"$2")}return i+s};n.calculateDistance=function(t,n){"use strict";var r=6371,i=t.lat,s=t.lng,o=n.lat,u=n.lng,a=(o-i)*Math.PI/180,f=(u-s)*Math.PI/180,l=Math.sin(a/2)*Math.sin(a/2)+Math.sin(f/2)*Math.sin(f/2)*Math.cos(i*Math.PI/180)*Math.cos(o*Math.PI/180),c=2*Math.atan2(Math.sqrt(l),Math.sqrt(1-l));return r*c*.62137119};n.populateInfoWindowData=function(t){$("#situs-address").text(t.partialAddress);$("#situs-address-href").prop("href","http://www.google.com/search?q="+encodeURIComponent(t.partialAddress));$("#owner-names").text(t.ownerNameDesc);$("#owner-names-href").prop("href","http://www.google.com/search?q="+encodeURIComponent(t.ownerNameDesc));$("#owner-address").text(t.ownerAddressDesc);$("#accounts").text(t.parcelAcctIds);$("#total-tax-val").text(t.totalTaxDesc);$("#homestead-val").text(t.homesteadWorthDesc);$("#purchased-date").text(t.deedDateDesc);$("#year-built").text(t.houseYearBuiltDesc);$("#homesteaded-date").text(t.homesteadedDesc);$("#senior-desc").text(t.seniorDesc);$("#deferred-desc").text(t.deferredDesc);$("#disabled-desc").text(t.disabledDesc);$("#veteran-desc").text(t.vetDesc);$("#total-val-desc").text(t.totalValDesc);$("#house-val-desc").text(t.houseValDesc);$("#land-val-desc").text(t.landValDesc);$("#other-val-desc").text(t.otherVal?" + "+t.otherValDesc+" other":"");$("#house-sqft-desc").text(t.houseNumSqftDesc);$("#house-num-bedrooms").text(t.houseNumBedroomsDesc);$("#house-num-full-baths").text(t.houseNumFullBathsDesc);$("#house-num-half-baths").text(t.houseNumHalfBathsDesc);$("#house-num-stories").text(t.houseNumStoriesDesc);$("#cdu-name").text(t.cduName);$("#misc-desc").text(t.misc);$("#land-desc").text(t.landDesc);$("#mapsco").text(t.mapsco)};n.title=function(t){return t.partialAddress};n.lite=function(t,r,i){var s=function(t,r,i,s){return n.parseNumberStrict(typeof r==="number"?r:r||i,function(){throw new Error("Invalid "+t+": "+r)},s)};r=r||function(){};i=i||function(){};t=typeof t==="string"?{address:t}:t;t={address:t.address,maxAgeDiff:s("max-age-diff",t.maxAgeDiff,2,false),maxCduDiff:s("max-CDU-diff",t.maxCduDiff,2,false),maxDistance:s("max-distance",t.maxDistance,.5,true),maxLandDiff:s("max-land-diff",t.maxLandDiff,0,true),maxNumComps:s("max-num-comps",t.maxNumComps,5,false),distanceUnits:n.canonicalDistanceUnitName(t.distanceUnits,true)};n.Parcel.byAddress(t.address,function(s){var o=s.parcel,u=[];o.county.getParcels(new n.GeoCircle(o,t.maxDistance,t.distanceUnits),function(a){u=a.filter(function(t){return t.houseValPerSqft&&t.houseValPerSqft<o.houseValPerSqft});var f=u.filter(function(n){return n.houseAge<=o.houseAge+t.maxAgeDiff}).sort(function(t,n){return t.houseValPerSqft-n.houseValPerSqft});var l=new n.AssessedParcel(o,f.slice(0,t.maxNumComps));var c=l.averageComp("houseValPerSqft");if(l.comps.length){r({constraints:t,beautifiedAddress:s.beautifiedAddress,target:o,comps:l.comps,savingsVal:(o.houseValPerSqft-c)*o.houseNumSqft,savingsPct:100*(o.houseValPerSqft-c)/(o.houseValPerSqft||1),avgCompHouseValPerSqft:c,newHouseVal:c*o.houseNumSqft,taxVal:o.savingsWorth*(o.houseValPerSqft-c)*o.houseNumSqft,numPotentialComps:u.length,numEligibleComps:f.length})}else{i({message:"No Qualifying Comps",address:s.beautifiedAddress})}})},i)};return n}()